# midi note mapping
KEY_MAP = {
    # left board
    (0, 7, 0): 24,  # A0
    (0, 6, 0): 25,  # A#0
    (0, 5, 0): 26,  # B0
    (0, 4, 0): 27,  # C1
    (0, 3, 0): 28,  # C#1
    (0, 2, 0): 29,  # D1
    (0, 1, 0): 30,  # D#1
    (0, 0, 0): 31,  # E1
    (0, 7, 1): 32,  # F1
    (0, 6, 1): 33,  # F#1
    (0, 5, 1): 34,  # G1
    (0, 4, 1): 35,  # G#1
    (0, 3, 1): 36,  # A1
    (0, 2, 1): 37,  # A#1
    (0, 1, 1): 38,  # B1
    (0, 0, 1): 39,  # C2
    (0, 7, 2): 40,  # C#2
    (0, 6, 2): 41,  # D2
    (0, 5, 2): 42,  # D#2
    (0, 4, 2): 43,  # E2
    (0, 3, 2): 44,  # F2
    (0, 2, 2): 45,  # F#2
    (0, 1, 2): 46,  # G2
    (0, 0, 2): 47,  # G#2
    (0, 7, 3): 48,  # A2
    (0, 6, 3): 49,  # A#2
    (0, 5, 3): 50,  # B2
    (0, 4, 3): 51,  # C3
    (0, 3, 3): 52,  # C#3
    (0, 2, 3): 53,  # D3
    (0, 1, 3): 54,  # D#3
    (0, 0, 3): 55,  # E3
    (0, 7, 4): 56,  # F3
    (0, 6, 4): 57,  # F#3
    (0, 5, 4): 58,  # G3
    (0, 4, 4): 59,  # G#3
    (0, 3, 4): 60,  # A3
    (0, 2, 4): 61,  # A#3
    (0, 1, 4): 62,  # B3
    (0, 0, 4): 63,  # C4
    
    # right board
    (1, 7, 0): 64,  # C#4
    (1, 6, 0): 65,  # D4
    (1, 5, 0): 66,  # D#4
    (1, 4, 0): 67,  # E4
    (1, 3, 0): 68,  # F4
    (1, 2, 0): 69,  # F#4
    (1, 1, 0): 70,  # G4
    (1, 0, 0): 71,  # G#4
    (1, 7, 1): 72,  # A4
    (1, 6, 1): 73,  # A#4
    (1, 5, 1): 74,  # B4
    (1, 4, 1): 75,  # C5
    (1, 3, 1): 76,  # C#5
    (1, 2, 1): 77,  # D5
    (1, 1, 1): 78,  # D#5
    (1, 0, 1): 79,  # E5
    (1, 7, 2): 80,  # F5
    (1, 6, 2): 81,  # F#5
    (1, 5, 2): 82,  # G5
    (1, 4, 2): 83,  # G#5
    (1, 3, 2): 84,  # A5
    (1, 2, 2): 85,  # A#5
    (1, 1, 2): 86,  # B5
    (1, 0, 2): 87,  # C6
    (1, 7, 3): 88,  # C#6
    (1, 6, 3): 89,  # D6
    (1, 5, 3): 90,  # D#6
    (1, 4, 3): 91,  # E6
    (1, 3, 3): 92,  # F6
    (1, 2, 3): 93,  # F#6
    (1, 1, 3): 94,  # G6
    (1, 0, 3): 95,  # G#6
    (1, 7, 4): 96,  # A6
    (1, 6, 4): 97,  # A#6
    (1, 5, 4): 98,  # B6
    (1, 4, 4): 99,  # C7
    (1, 3, 4): 100,  # C#7
    (1, 2, 4): 101,  # D7
    (1, 1, 4): 102,  # D#7
    (1, 0, 4): 103,  # E7
    (1, 7, 5): 104,  # F7
    (1, 6, 5): 105,  # F#7
    (1, 5, 5): 106,  # G7
    (1, 4, 5): 107,  # G#7
    (1, 3, 5): 108,  # A7
    (1, 2, 5): 109,  # A#7
    (1, 1, 5): 110,  # B7
    (1, 0, 5): 111,  # C8
}

# reverse mapping for debugging
NOTE_NAMES = {
    24: "A0",
    25: "A#0",
    26: "B0",
    27: "C1",
    28: "C#1",
    29: "D1",
    30: "D#1",
    31: "E1",
    32: "F1",
    33: "F#1",
    34: "G1",
    35: "G#1",
    36: "A1",
    37: "A#1",
    38: "B1",
    39: "C2",
    40: "C#2",
    41: "D2",
    42: "D#2",
    43: "E2",
    44: "F2",
    45: "F#2",
    46: "G2",
    47: "G#2",
    48: "A2",
    49: "A#2",
    50: "B2",
    51: "C3",
    52: "C#3",
    53: "D3",
    54: "D#3",
    55: "E3",
    56: "F3",
    57: "F#3",
    58: "G3",
    59: "G#3",
    60: "A3",
    61: "A#3",
    62: "B3",
    63: "C4",
    64: "C#4",
    65: "D4",
    66: "D#4",
    67: "E4",
    68: "F4",
    69: "F#4",
    70: "G4",
    71: "G#4",
    72: "A4",
    73: "A#4",
    74: "B4",
    75: "C5",
    76: "C#5",
    77: "D5",
    78: "D#5",
    79: "E5",
    80: "F5",
    81: "F#5",
    82: "G5",
    83: "G#5",
    84: "A5",
    85: "A#5",
    86: "B5",
    87: "C6",
    88: "C#6",
    89: "D6",
    90: "D#6",
    91: "E6",
    92: "F6",
    93: "F#6",
    94: "G6",
    95: "G#6",
    96: "A6",
    97: "A#6",
    98: "B6",
    99: "C7",
    100: "C#7",
    101: "D7",
    102: "D#7",
    103: "E7",
    104: "F7",
    105: "F#7",
    106: "G7",
    107: "G#7",
    108: "A7",
    109: "A#7",
    110: "B7",
    111: "C8"
}